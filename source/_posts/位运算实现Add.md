---
title: 位运算实现Add
date: 2018-01-28 13:30:43
tags:
categories:
    - "practice"
    - "C/C++"
---
## 题目：
**实现一个Add函数，让两个整数相加，不能够使用`+-*/、++、--`**
### 思路：
- 正常实现两个数相加，有两个步骤，第一将两个数对应位相加，第二相加之后有进位，将进位值与对应位相加。举个例子，`15+5=20`先将位进行相加，不进行进位，得到`10`，再将进位加上，个位没有进位，十位进1，得到`20`。
<!--more-->
- 题目要求不能使用`+-*/`，所以想到了位运算。15的二进制是`1111`，5的二进制是`0101`。根据上面的思路，我们先进行不进位相加，得到`1010`。(这个运算方式正好对应`^`)然后将进位加上(只求进位的运算正好对应`&`再左移一位)，例子中只有第四位、第二位数值有进位值。得到`10100`，这个值就是`20`。


### 代码如下
```c++
    //1、递归实现，每次将不进位相加的值赋给a，将计算出来的进位值赋给b，递归进行两者的分步相加，直到进位值`b=0`，返回a。
    long long Add( int a, int b ){
        if( b == 0 )
            return a;
        int sum = a^b;
        b = (a&b)<<1;
        a = sum;
        return Add( a, b );
    }
    int main(){
        system( "clear" );
        cout << Add(3, 7) << endl;

        //2、同时可以用迭代实现(非函数)，思路一样，进位值b最后肯定会等于0，因为总有进位结束的时候。
        int a = 49;
        int b = 4;
        while( b != 0 ){
            int sum = a^b;
            b = (a&b)<<1;
            a = sum;
        }
        cout << a << endl;
        return 0;
    }
```